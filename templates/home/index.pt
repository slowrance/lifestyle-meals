<div metal:use-macro="load: ../shared/_layout.pt">
    <div metal:fill-slot="content" tal:omit-tag="True">

        <div class="content">

            <div class="hero">
                <div class="hero-inner">
                    <h1>
                        Meal Randomizer for TTP Lifestyle meals
                    </h1>
                </div>
            </div>
            <div class="targets">
            <h2>Macro Targets</h2>

                    <form action="" method="POST" class="macros-form">
                        <div class="flex-container">
                            <div class="target">
                                <div class="macro-label">Carb Target</div>
                                <input name="target_carbs" type="text" placeholder=" Carb Target" class="form-control" value="${target_carbs}" required>
                            </div>
                            <div class="target">
                                <div class="macro-label">Protein Target</div>
                                <input name="target_proteins" type="text" placeholder=" Protein Target" class="form-control" value="${target_proteins}" required>
                            </div>
                            <div class="target">
                                <div class="macro-label">Fat Target</div>
                                <input name="target_fats" type="text" placeholder=" Fat Target" class="form-control" value="${target_fats}" required>
                            </div>
                            <button type="submit" class="btn btn-success btn-generate">Generate Meal</button>
                            <div style="clear: both;"></div>

                            <div class="error-msg" tal:condition="error">${ error }</div>
                        </div>
                    </form>

            </div>


            <div class="stat-container" tal:condition="valid_combo_count">
                <div class="stats">There are ${valid_combo_count} total meal combinations that meet those macro requirements</div>
            </div>


            <div class="flex-container">
                <div class="daily-meals" tal:repeat="dm daily_meals" tal:condition="daily_meals">
                    <div class="meal-label meal-carbs label">Carbs</div>
                    <div class="meal-label meal-proteins label">Proteins</div>
                    <div class="meal-label meal-fats label">Fats</div>
                    <div class="meal-label meal-calories label">Calories</div>

                    <div class="meal breakfast"><span class="label">Breakfast: </span>${dm['breakfast'].name}</div>
                    <div class="meal lunch"><span class="label">Lunch: </span>${dm['lunch'].name}</div>
                    <div class="meal dinner"><span class="label">Dinner: </span>${dm['dinner'].name}</div>
                    <div class="meal meal-total"><span class="label">Total: </span></div>
                    <div class="meal meal-remaining"><span class="label">Remaining: </span></div>

                    <div class="meal-carbs breakfast">${dm['breakfast'].carbs}</div>
                    <div class="meal-carbs lunch">${dm['lunch'].carbs}</div>
                    <div class="meal-carbs dinner">${dm['dinner'].carbs}</div>

                    <div class="meal-proteins breakfast">${dm['breakfast'].proteins}</div>
                    <div class="meal-proteins lunch">${dm['lunch'].proteins}</div>
                    <div class="meal-proteins dinner">${dm['dinner'].proteins}</div>

                    <div class="meal-fats breakfast">${dm['breakfast'].fats}</div>
                    <div class="meal-fats lunch">${dm['lunch'].fats}</div>
                    <div class="meal-fats dinner">${dm['dinner'].fats}</div>

                    <div class="meal-calories breakfast">${dm['breakfast'].calories}</div>
                    <div class="meal-calories lunch">${dm['lunch'].calories}</div>
                    <div class="meal-calories dinner">${dm['dinner'].calories}</div>

                    <div class="meal-carbs meal-total">${dm['breakfast'].carbs + dm['lunch'].carbs + dm['dinner'].carbs}</div>
                    <div class="meal-proteins meal-total">${dm['breakfast'].proteins + dm['lunch'].proteins + dm['dinner'].proteins}</div>
                    <div class="meal-fats meal-total">${dm['breakfast'].fats + dm['lunch'].fats + dm['dinner'].fats}</div>
                    <div class="meal-calories meal-total">${dm['breakfast'].calories + dm['lunch'].calories + dm['dinner'].calories}</div>

                    <div class="meal-carbs meal-remaining">${target_carbs - (dm['breakfast'].carbs + dm['lunch'].carbs + dm['dinner'].carbs)}</div>
                    <div class="meal-proteins meal-remaining">${target_proteins - (dm['breakfast'].proteins + dm['lunch'].proteins + dm['dinner'].proteins)}</div>
                    <div class="meal-fats meal-remaining">${target_fats - (dm['breakfast'].fats + dm['lunch'].fats + dm['dinner'].fats)}</div>


                </div>
            </div>

        </div>

    </div>

    <div metal:fill-slot="additional-css" tal:omit-tag="True">
        <!-- additional css from the page -->
    </div>
</div>